/* Fullscreen-first calling layout (Zoom-like) */
.gg-root{position:relative;inset:0;display:flex;flex-direction:column;height:100vh;height:100dvh;min-height:100svh;width:100%;background:#0b0b0d;z-index:0}
.gg-stage{flex:1;min-height:0;display:flex}
.gg-cams{flex:1;display:grid;gap:8px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));padding:8px}
.density-cozy .gg-cams{gap:12px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
.density-compact .gg-cams{gap:6px;grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}
.gg-split{flex:1;display:grid;grid-template-columns:minmax(0,1fr) 300px;gap:8px;padding:8px}
.gg-rail{display:flex;flex-direction:column;gap:8px;overflow:auto}
.gg-primary{position:relative;min-height:0;border-radius:10px;overflow:hidden;background:#111}
.gg-primary.screen .lk-participant-tile video{object-fit:contain!important}
.gg-primary.cam .lk-participant-tile video{object-fit:cover}
.gg-empty{display:grid;place-items:center;color:#aaa;background:#111;border-radius:10px}

/* Universal tile visuals */
.gg-tile{position:relative;border-radius:10px;overflow:hidden;background:#111;isolation:isolate}
.gg-tile>*{pointer-events:none}
.gg-tile .gg-label,.gg-tile .gg-pin-btn{pointer-events:auto}
.gg-label{position:absolute;left:8px;bottom:8px;background:rgba(0,0,0,.45);color:#fff;padding:3px 8px;border-radius:6px;font-size:12px;backdrop-filter:blur(2px)}
.gg-pin-btn{position:absolute;right:8px;top:8px;background:rgba(0,0,0,.45);color:#fff;border:1px solid #444;border-radius:6px;padding:4px 8px;cursor:pointer;opacity:.0;transition:opacity .15s ease, background .15s ease}
.gg-tile:hover .gg-pin-btn{opacity:1}
.gg-pin-btn:hover{background:rgba(0,0,0,.6)}
@media (max-width:520px){
  .gg-pin-btn{padding:3px 6px;font-size:12px;border-radius:5px}
}
.gg-tile.speaking{box-shadow:0 0 0 2px #7dd3fc,inset 0 0 0 2px rgba(125,211,252,.25)}

/* Overlay toolbar */
.gg-toolbar{--tool-h:56px;position:absolute;left:0;right:0;bottom:0;display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:10px;padding:10px max(12px, env(safe-area-inset-right,12px)) calc(10px + env(safe-area-inset-bottom,0px)) max(12px, env(safe-area-inset-left,12px));background:linear-gradient(180deg,rgba(0,0,0,.05) 0%, rgba(0,0,0,.5) 50%, rgba(0,0,0,.85) 100%);z-index:1000;color:#fff;pointer-events:auto;border-top:1px solid rgba(255,255,255,.08);min-height:var(--tool-h)}
.gg-root.hide-ui .gg-toolbar{opacity:0;pointer-events:none;transition:opacity .25s ease}
.gg-toolbar{transition:opacity .2s ease}
.gg-btn{background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.2);color:#fff;border-radius:10px;padding:10px 14px;cursor:pointer;backdrop-filter:blur(4px)}
.gg-btn:hover{background:rgba(255,255,255,.15)}
.gg-btn[aria-pressed="true"]{outline:2px solid #5ad}
.gg-btn.danger{background:#b3261e;border-color:#d13a31}
.gg-left,.gg-center,.gg-right{display:flex;gap:8px;align-items:center}
.gg-center{flex:1;justify-content:center;min-width:0}
.gg-center .gg-btn{min-width:40px}
.gg-btn.icon{font-size:18px;line-height:1}
.gg-badge{background:rgba(255,255,255,.15);border:1px solid rgba(255,255,255,.25);padding:6px 10px;border-radius:999px;font-size:12px}
@media (max-width:520px){
  .gg-btn{padding:8px 10px;font-size:12px;border-radius:8px}
  .gg-left,.gg-center,.gg-right{gap:6px}
  .gg-toolbar{--tool-h:96px;display:grid;grid-template-columns:1fr 1fr;grid-template-areas:"left right" "center center";align-items:center}
  .gg-left{grid-area:left;justify-content:flex-start}
  .gg-center{grid-area:center;justify-content:center}
  .gg-right{grid-area:right;justify-content:flex-end}
  /* keep pin visible on touch devices */
  .gg-pin-btn{opacity:1}
}

/* Devices/settings popover */
.gg-popover{position:absolute;right:12px;bottom:64px;z-index:1100;background:rgba(18,18,18,.95);color:#fff;border:1px solid #2a2a2a;border-radius:10px;min-width:260px;max-width:320px;box-shadow:0 8px 24px rgba(0,0,0,.45);padding:10px}
.gg-pop-section{margin-bottom:10px}
.gg-pop-section h4{margin:6px 4px 8px;font-size:12px;font-weight:600;opacity:.9}
.gg-list{display:flex;flex-direction:column;gap:6px;max-height:220px;overflow:auto}
.gg-list-item{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);color:#fff;border-radius:8px;padding:8px 10px;text-align:left}
.gg-list-item:hover{background:rgba(255,255,255,.13)}

/* Responsive tweaks */
@media (max-width:920px){
  .gg-split{grid-template-columns:minmax(0,1fr) 240px}
}
@media (max-width:720px){
  .gg-split{grid-template-columns:1fr}
  .gg-rail{flex-direction:row;overflow:auto}
}

/* Mobile-specific adjustments */
@media (max-width:640px){
  .call-topbar,.call-statusbar,.call-controls{display:none!important}
  /* Leave extra space for toolbar above OS bars */
  .gg-root{padding-bottom:calc(56px + env(safe-area-inset-bottom,0px))}
  /* Hide tile labels on small screens to reduce clutter */
  .gg-label{display:none}
}

/* Filmstrip for mobile */
.gg-filmstrip{position:absolute;left:0;right:0;bottom:calc(var(--tool-h,56px) + env(safe-area-inset-bottom,0px));padding:6px;z-index:980;display:none;pointer-events:none;transition:opacity .2s ease}
.gg-root.hide-ui .gg-filmstrip{opacity:0}
.gg-film-inner{display:flex;gap:6px;overflow:auto;padding:2px 6px;pointer-events:auto}
.gg-film-thumb{width:100px;min-width:100px;height:60px;border-radius:8px;overflow:hidden;background:#111;position:relative;pointer-events:auto}
.gg-film-thumb .lk-participant-tile video{object-fit:cover}
.gg-film-thumb .lk-participant-tile [class*="label"],
.gg-film-thumb .lk-participant-name,
.gg-film-thumb .lk-participant-metadata,
.gg-film-thumb .lk-audio-signal,
.gg-film-thumb .gg-label{display:none!important}
@media (max-width:640px){
  .gg-filmstrip{display:block}
}
.gg-call-layout{display:flex;flex-direction:column;gap:8px;height:100%;width:100%;background:#0b0b0d;padding:env(safe-area-inset-top,8px) 8px env(safe-area-inset-bottom,8px)}
.gg-main{flex:1;display:flex;min-height:0}
.gg-pinned,.gg-screens,.gg-cams{flex:1;display:grid;gap:8px;width:100%;height:100%}
.gg-pinned>*{width:100%;height:100%}
.gg-screens{grid-template-columns:repeat(auto-fit,minmax(280px,1fr));align-items:stretch}
.gg-cams{grid-template-columns:repeat(auto-fit,minmax(220px,1fr));align-items:stretch}
.gg-screen,.gg-cam,.gg-tile{position:relative;border-radius:10px;overflow:hidden;background:#111}
.gg-strip{display:flex;gap:8px;overflow-x:auto;padding:8px;align-items:center;border-top:1px solid #1f1f1f}
.gg-thumb{width:190px;min-width:190px;height:110px;border-radius:8px;overflow:hidden;background:#0f0f10;opacity:.95;flex:0 0 auto}
.gg-thumb.pinned{outline:2px solid #5ad;opacity:1}
.gg-thumb.screen{width:230px;min-width:230px;height:130px}
.gg-fullscreen{margin-left:auto;padding:8px 12px;border-radius:8px;border:1px solid #2a2a2a;background:#141414;color:#e7e7e7}

/* Tile overlays and clickability */
.gg-tile{isolation:isolate}
.gg-tile>*{pointer-events:none}
.gg-tile .gg-label,.gg-tile .gg-pin-btn{pointer-events:auto}
.gg-label{position:absolute;left:8px;bottom:8px;background:rgba(0,0,0,.45);color:#fff;padding:3px 8px;border-radius:6px;font-size:12px;backdrop-filter:blur(2px)}
.gg-pin-btn{position:absolute;right:8px;top:8px;background:rgba(0,0,0,.45);color:#fff;border:1px solid #444;border-radius:6px;padding:4px 8px;cursor:pointer}
.gg-pin-btn:hover{background:rgba(0,0,0,.6)}

/* Active speaker ring */
.gg-tile.speaking{box-shadow:0 0 0 2px #7dd3fc,inset 0 0 0 2px rgba(125,211,252,.25)}

/* Focus accessibility */
.gg-tile:focus{outline:2px solid #5ad;outline-offset:2px}

@media (max-width:840px){
  .gg-cams{grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}
  .gg-screens{grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
}
@media (max-width:640px){
  .gg-thumb{width:140px;min-width:140px;height:80px}
  .gg-screens{grid-template-columns:1fr}
}
.gg-call-layout { display:flex; flex-direction:column; gap:8px; height:100%; width:100%; background:#0b0b0d; }
.gg-main { flex:1; display:flex; min-height:0; }
.gg-pinned, .gg-screens, .gg-cams { flex:1; display:grid; gap:6px; width:100%; height:100%; }
.gg-pinned > * { width:100%; height:100%; }
.gg-screens { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); align-items:stretch; }
.gg-cams { grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); align-items:stretch; }
.gg-screen, .gg-cam { position:relative; border-radius:8px; overflow:hidden; background:#111; }
.gg-strip { display:flex; gap:6px; overflow-x:auto; padding:6px; align-items:center; }
.gg-thumb { width:180px; min-width:180px; height:102px; border-radius:6px; overflow:hidden; background:#111; opacity:.9; }
.gg-thumb.pinned { outline:2px solid #5ad; opacity:1; }
.gg-thumb.screen { width:220px; min-width:220px; height:124px; }
.gg-fullscreen { margin-left:auto; padding:6px 10px; border-radius:6px; border:1px solid #2a2a2a; background:#141414; color:#e7e7e7; }
@media (max-width: 640px) {
  .gg-thumb { width:140px; min-width:140px; height:80px; }
  .gg-screens { grid-template-columns: 1fr; }
}
/* Ensure videos fit the visible frame appropriately */
.gg-primary.screen .lk-participant-tile video,
.gg-tile.screen .lk-participant-tile video { object-fit: contain !important; }
.gg-primary.cam .lk-participant-tile video,
.gg-tile.cam .lk-participant-tile video { object-fit: cover; }
/* Per-tile fullscreen button styling */
.gg-fs-btn{position:absolute;right:8px;bottom:8px;background:rgba(0,0,0,.45);color:#fff;border:1px solid #444;border-radius:6px;padding:4px 8px;cursor:pointer;opacity:.0;transition:opacity .15s ease, background .15s ease}
.gg-tile:hover .gg-fs-btn{opacity:1}
.gg-fs-btn:hover{background:rgba(0,0,0,.6)}
@media (max-width:520px){
  .gg-fs-btn{padding:3px 6px;font-size:12px;border-radius:5px}
}